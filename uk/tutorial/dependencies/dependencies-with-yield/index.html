
<!doctype html>
<html lang="uk" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ReadyAPI framework, high performance, easy to learn, fast to code, ready for production">
      
      
      
        <link rel="canonical" href="https://readyapi.github.io/uk/tutorial/dependencies/dependencies-with-yield/">
      
      
        <link rel="prev" href="../global-dependencies/">
      
      
        <link rel="next" href="../../security/">
      
      
      <link rel="icon" href="../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.1">
    
    
      
        <title>Dependencies with yield - ReadyAPI</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/termynal.css">
    
      <link rel="stylesheet" href="../../../css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-YNEVN69SC3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-YNEVN69SC3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-YNEVN69SC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dependencies-with-yield" class="md-skip">
          –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∑–º—ñ—Å—Ç—É
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div class="announce-wrapper">
  <div id="announce-left">
    <div class="item">
      <a class="announce-link" href="https://twitter.com/readyapi" target="_blank">
        <span class="twemoji twitter">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
        </span> Follow <strong>@readyapi</strong> on <strong>Twitter</strong> to stay updated
      </a>
    </div>
    <div class="item">
      <a class="announce-link" href="https://www.linkedin.com/company/readyapi" target="_blank">
        <span class="twemoji linkedin">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
        </span> Follow <strong>ReadyAPI</strong> on <strong>LinkedIn</strong> to stay updated
      </a>
    </div>
    <div class="item">
      <a class="announce-link" href="https://readyapi.github.io/newsletter/">
        <span class="twemoji">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
        </span> Subscribe to the <strong>ReadyAPI and friends</strong> newsletter üéâ
      </a>
    </div>
  </div>
  <div id="announce-right" style="position: relative;">
    <div class="item">
      <a title="BlockBee Cryptocurrency Payment Gateway" style="display: block; position: relative;" href="https://blockbee.io?ref=readyapi" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/blockbee-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Build, run and scale your apps on a modern, reliable, and secure PaaS." style="display: block; position: relative;" href="https://platform.sh/try-it-now/?utm_source=readyapi-signup&utm_medium=banner&utm_campaign=ReadyAPI-signup-June-2023" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/platform-sh-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Deploy ReadyAPI on AWS with a few clicks" style="display: block; position: relative;" href="https://www.porter.run" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/porter-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Scalar: Beautiful Open-Source API References from Swagger/OpenAPI files" style="display: block; position: relative;" href="https://github.com/scalar/scalar/?utm_source=readyapi&utm_medium=website&utm_campaign=top-banner" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/scalar-banner.svg" />
      </a>
    </div>
    <div class="item">
      <a title="Auth, user management and more for your B2B product" style="display: block; position: relative;" href="https://www.propelauth.com/?utm_source=readyapi&utm_campaign=1223&utm_medium=topbanner" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/propelauth-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Build your next app with ReadyAPI and MongoDB" style="display: block; position: relative;" href="https://www.mongodb.com/developer/languages/python/python-quickstart-readyapi/?utm_campaign=readyapi_framework&utm_source=readyapi_sponsorship&utm_medium=web_referral" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/mongodb-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Zuplo: Scale, Protect, Document, and Monetize your ReadyAPI" style="display: block; position: relative;" href="https://zuplo.link/readyapi-web" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/zuplo-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="liblab - Generate SDKs from ReadyAPI" style="display: block; position: relative;" href="https://liblab.com?utm_source=readyapi" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/liblab-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Deploy & scale any full-stack web app on Render. Focus on building apps, not infra." style="display: block; position: relative;" href="https://docs.render.com/deploy-readyapi?utm_source=deploydoc&utm_medium=referral&utm_campaign=readyapi" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/render-banner.svg" />
      </a>
    </div>
    <div class="item">
      <a title="Cut Code Review Time & Bugs in Half with CodeRabbit" style="display: block; position: relative;" href="https://www.coderabbit.ai/?utm_source=readyapi&utm_medium=banner&utm_campaign=readyapi" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/coderabbit-banner.png" />
      </a>
    </div>
    <div class="item">
      <a title="Making Retail Purchases Actionable for Brands and Developers" style="display: block; position: relative;" href="https://subtotal.com/?utm_source=readyapi&utm_medium=sponsorship&utm_campaign=open-source" target="_blank">
        <span class="sponsor-badge">sponsor</span>
        <img class="sponsor-image" src="/img/sponsors/subtotal-banner.svg" />
      </a>
    </div>
  </div>
</div>

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="–•–µ–¥–µ—Ä">
    <a href="../../.." title="ReadyAPI" class="md-header__button md-logo" aria-label="ReadyAPI" data-md-component="logo">
      
  <img src="../../../img/icon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ReadyAPI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dependencies with yield
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2C5.13 2 2 5.13 2 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7M6 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H6zm13-8h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="–û–±—Ä–∞—Ç–∏ –º–æ–≤—É">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="" class="md-select__link">
              en - English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/az/" hreflang="" class="md-select__link">
              az - az…ôrbaycan dili
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/bn/" hreflang="" class="md-select__link">
              bn - ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/de/" hreflang="" class="md-select__link">
              de - Deutsch
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/es/" hreflang="" class="md-select__link">
              es - espa√±ol
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/fa/" hreflang="" class="md-select__link">
              fa - ŸÅÿßÿ±ÿ≥€å
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/fr/" hreflang="" class="md-select__link">
              fr - fran√ßais
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/he/" hreflang="" class="md-select__link">
              he - ◊¢◊ë◊®◊ô◊™
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/hu/" hreflang="" class="md-select__link">
              hu - magyar
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/id/" hreflang="" class="md-select__link">
              id - Bahasa Indonesia
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/it/" hreflang="" class="md-select__link">
              it - italiano
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/ja/" hreflang="" class="md-select__link">
              ja - Êó•Êú¨Ë™û
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/ko/" hreflang="" class="md-select__link">
              ko - ÌïúÍµ≠Ïñ¥
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/nl/" hreflang="" class="md-select__link">
              nl - Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/pl/" hreflang="" class="md-select__link">
              pl - Polski
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/pt/" hreflang="" class="md-select__link">
              pt - portugu√™s
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/ru/" hreflang="" class="md-select__link">
              ru - —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/tr/" hreflang="" class="md-select__link">
              tr - T√ºrk√ße
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/uk/" hreflang="" class="md-select__link">
              uk - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/ur/" hreflang="" class="md-select__link">
              ur - ÿßÿ±ÿØŸà
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/vi/" hreflang="" class="md-select__link">
              vi - Ti·∫øng Vi·ªát
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/yo/" hreflang="" class="md-select__link">
              yo - Yor√πb√°
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/zh/" hreflang="" class="md-select__link">
              zh - ÁÆÄ‰Ωì‰∏≠Êñá
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/zh-hant/" hreflang="" class="md-select__link">
              zh-hant - ÁπÅÈ´î‰∏≠Êñá
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/em/" hreflang="" class="md-select__link">
              üòâ
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="–ü–æ—à—É–∫" placeholder="–ü–æ—à—É–∫" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="–®—É–∫–∞—Ç–∏">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å" aria-label="–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="–û—á–∏—Å—Ç–∏—Ç–∏" aria-label="–û—á–∏—Å—Ç–∏—Ç–∏" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            –ü–æ—à—É–∫ —Ä–æ–∑–ø–æ—á–∞—Ç–æ
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/readyapi/readyapi" title="–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    readyapi/readyapi
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="–í–∫–ª–∞–¥–∫–∏" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  ReadyAPI

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../features/" class="md-tabs__link">
        
  
    
  
  –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../learn/" class="md-tabs__link">
          
  
    
  
  –ù–∞–≤—á–∞–Ω–Ω—è

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/" class="md-tabs__link">
          
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../readyapi-people/" class="md-tabs__link">
        
  
    
  
  ReadyAPI People

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../resources/" class="md-tabs__link">
          
  
    
  
  Resources

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../release-notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="–ù–∞–≤—ñ–≥–∞—Ü—ñ—è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ReadyAPI" class="md-nav__button md-logo" aria-label="ReadyAPI" data-md-component="logo">
      
  <img src="../../../img/icon-white.svg" alt="logo">

    </a>
    ReadyAPI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/readyapi/readyapi" title="–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    readyapi/readyapi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../learn/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    –ù–∞–≤—á–∞–Ω–Ω—è
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            –ù–∞–≤—á–∞–Ω–Ω—è
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –í—Å—Ç—É–ø –¥–æ —Ç–∏–ø—ñ–≤ Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../async/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concurrency and async / await
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../environment-variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../virtual-environments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    –¢—É—Ç–æ—Ä—ñ–∞–ª - –ü–æ—Å—ñ–±–Ω–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            –¢—É—Ç–æ—Ä—ñ–∞–ª - –ü–æ—Å—ñ–±–Ω–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ü–µ—Ä—à—ñ –∫—Ä–æ–∫–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../path-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path –ü–∞—Ä–∞–º–µ—Ç—Ä–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query –ü–∞—Ä–∞–º–µ—Ç—Ä–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../body/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-params-str-validations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Parameters and String Validations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../path-params-numeric-validations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Parameters and Numeric Validations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-param-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Parameter Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../body-multiple-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É - –î–µ–∫—ñ–ª—å–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../body-fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –¢—ñ–ª–æ - –ü–æ–ª—è
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../body-nested-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É - –í–∫–ª–∞–¥–µ–Ω—ñ –º–æ–¥–µ–ª—ñ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema-extra-example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Declare Request Example Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra-data-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookie-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ Cookie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../header-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Header-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookie-param-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ú–æ–¥–µ–ª—ñ –¥–ª—è Cookie-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../header-param-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ú–æ–¥–µ–ª—ñ –ü–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ó–∞–≥–æ–ª–æ–≤–∫—ñ–≤
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../response-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response Model - Return Type
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../response-status-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –°—Ç–∞—Ç—É—Å –∫–æ–¥–∏ –í—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../request-forms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –î–∞–Ω—ñ —Ñ–æ—Ä–º–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../request-form-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ú–æ–¥–µ–ª—ñ —Ñ–æ—Ä–º (Form Models)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../request-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ó–∞–ø–∏—Ç —Ñ–∞–π–ª—ñ–≤
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../request-forms-and-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ó–∞–ø–∏—Ç–∏ –∑ —Ñ–æ—Ä–º–∞–º–∏ —Ç–∞ —Ñ–∞–π–ª–∞–º–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../handling-errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handling Errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../path-operation-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Operation Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Compatible Encoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../body-updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Body - Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_29" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Dependencies
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6_29" id="__nav_3_6_29_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_29_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_6_29">
            <span class="md-nav__icon md-icon"></span>
            Dependencies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../classes-as-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classes as Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sub-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sub-dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dependencies-in-path-operation-decorators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependencies in path operation decorators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../global-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Dependencies with yield
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Dependencies with yield
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="–ó–º—ñ—Å—Ç">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      –ó–º—ñ—Å—Ç
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-database-dependency-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      A database dependency with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-dependency-with-yield-and-try" class="md-nav__link">
    <span class="md-ellipsis">
      A dependency with yield and try
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sub-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Sub-dependencies with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-httpexception" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and HTTPException
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-except" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and except
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies with yield and except">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-raise-in-dependencies-with-yield-and-except" class="md-nav__link">
    <span class="md-ellipsis">
      Always raise in Dependencies with yield and except
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-of-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Execution of dependencies with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-httpexception-except-and-background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield, HTTPException, except and Background Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies with yield, HTTPException, except and Background Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-except-technical-details" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and except, Technical Details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background-tasks-and-dependencies-with-yield-technical-details" class="md-nav__link">
    <span class="md-ellipsis">
      Background Tasks and Dependencies with yield, Technical Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-managers" class="md-nav__link">
    <span class="md-ellipsis">
      Context Managers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Managers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-context-managers" class="md-nav__link">
    <span class="md-ellipsis">
      What are "Context Managers"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-context-managers-in-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Using context managers in dependencies with yield
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_30" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../security/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6_30" id="__nav_3_6_30_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6_30">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/first-steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security - First Steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/get-current-user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Current User
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/simple-oauth2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple OAuth2 with Password and Bearer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/oauth2-jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OAuth2 with Password (and hashing), Bearer with JWT tokens
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CORS (Cross-Origin Resource Sharing)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql-databases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQL (Relational) Databases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bigger-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bigger Applications - Multiple Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ú–µ—Ç–∞–¥–∞–Ω—ñ —Ç–∞ URL-–∞–¥—Ä–µ—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../static-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (Debugging)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../advanced/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Advanced User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/path-operation-advanced-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Operation Advanced Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/additional-status-codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional Status Codes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/response-directly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Return a Response Directly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/custom-response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Response - HTML, Stream, File, others
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/additional-responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional Responses in OpenAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/response-cookies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response Cookies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/response-headers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response Headers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/response-change-status-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response - Change Status Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/advanced-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../advanced/security/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Security
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_7_11" id="__nav_3_7_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_7_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7_11">
            <span class="md-nav__icon md-icon"></span>
            Advanced Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/security/oauth2-scopes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OAuth2 scopes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/security/http-basic-auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP Basic Auth
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/using-request-directly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the Request Directly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Dataclasses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Middleware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/sub-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sub Applications - Mounts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/behind-a-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Behind a Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/websockets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WebSockets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifespan Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/testing-websockets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing WebSockets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/testing-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Events: startup - shutdown
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/testing-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Dependencies with Overrides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/async-tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings and Environment Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/openapi-callbacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI Callbacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/openapi-webhooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI Webhooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/wsgi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Including WSGI - Flask, Django, others
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/generate-clients/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Clients
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readyapi-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../deployment/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/versions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About ReadyAPI versions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/https/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About HTTPS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/manually/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a Server Manually
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployments Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy ReadyAPI on Cloud Providers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/server-workers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Workers - Uvicorn with Workers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI in Containers - Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../how-to/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    How To - Recipes
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            How To - Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General - How To - Recipes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/graphql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GraphQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/custom-request-and-route/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Request and APIRoute class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/conditional-openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conditional OpenAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/extending-openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending OpenAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/separate-openapi-schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Separate OpenAPI Schemas for Input and Output or Not
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/custom-docs-ui-assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Docs UI Static Assets (Self-Hosting)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/configure-swagger-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure Swagger UI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to/testing-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing a Database
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/readyapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Request Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Status Codes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/uploadfile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UploadFile class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions - HTTPException and WebSocketException
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependencies - Depends() and Security()
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/apirouter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIRouter class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background Tasks - BackgroundTasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Request class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/websockets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WebSockets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/httpconnection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPConnection class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Response Classes - File, HTML, Redirect, Streaming, etc.
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_16" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/openapi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    OpenAPI
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_16" id="__nav_4_16_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            OpenAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/openapi/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI docs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/openapi/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/encoders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoders - jsonable_encoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/staticfiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Static Files - StaticFiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/templating/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templating - Jinja2Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/testclient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Client - TestClient
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readyapi-people/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI People
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../resources/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Resources
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../help-readyapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help ReadyAPI - Get Help
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development - Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project-generation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Stack ReadyAPI Template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../external-links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Links and Articles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../newsletter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI and friends newsletter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../management-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repository Management Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../about/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../alternatives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏, –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../history-design-future/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History, Design and Future
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../benchmarks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repository Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="–ó–º—ñ—Å—Ç">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      –ó–º—ñ—Å—Ç
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-database-dependency-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      A database dependency with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-dependency-with-yield-and-try" class="md-nav__link">
    <span class="md-ellipsis">
      A dependency with yield and try
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sub-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Sub-dependencies with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-httpexception" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and HTTPException
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-except" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and except
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies with yield and except">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-raise-in-dependencies-with-yield-and-except" class="md-nav__link">
    <span class="md-ellipsis">
      Always raise in Dependencies with yield and except
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-of-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Execution of dependencies with yield
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies-with-yield-httpexception-except-and-background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield, HTTPException, except and Background Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies with yield, HTTPException, except and Background Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies-with-yield-and-except-technical-details" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies with yield and except, Technical Details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background-tasks-and-dependencies-with-yield-technical-details" class="md-nav__link">
    <span class="md-ellipsis">
      Background Tasks and Dependencies with yield, Technical Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-managers" class="md-nav__link">
    <span class="md-ellipsis">
      Context Managers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Managers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-context-managers" class="md-nav__link">
    <span class="md-ellipsis">
      What are "Context Managers"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-context-managers-in-dependencies-with-yield" class="md-nav__link">
    <span class="md-ellipsis">
      Using context managers in dependencies with yield
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="dependencies-with-yield">Dependencies with yield<a class="headerlink" href="#dependencies-with-yield" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The current page still doesn't have a translation for this language.</p>
<p>But you can help translating it: <a class="internal-link" href="https://readyapi.github.io/contributing/" target="_blank">Contributing</a>.</p>
</div>
<p>ReadyAPI supports dependencies that do some <abbr title='sometimes also called "exit code", "cleanup code", "teardown code", "closing code", "context manager exit code", etc.'>extra steps after finishing</abbr>.</p>
<p>To do this, use <code>yield</code> instead of <code>return</code>, and write the extra steps (code) after.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Make sure to use <code>yield</code> one single time per dependency.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Technical Details</p>
<p>Any function that is valid to use with:</p>
<ul>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager" class="external-link" target="_blank"><code>@contextlib.contextmanager</code></a> or</li>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.asynccontextmanager" class="external-link" target="_blank"><code>@contextlib.asynccontextmanager</code></a></li>
</ul>
<p>would be valid to use as a <strong>ReadyAPI</strong> dependency.</p>
<p>In fact, ReadyAPI uses those two decorators internally.</p>
</div>
<h2 id="a-database-dependency-with-yield">A database dependency with <code>yield</code><a class="headerlink" href="#a-database-dependency-with-yield" title="Permanent link">&para;</a></h2>
<p>For example, you could use this to create a database session and close it after finishing.</p>
<p>Only the code prior to and including the <code>yield</code> statement is executed before creating a response:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python 3.8+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db</span><span class="p">():</span>
</span><span id="__span-0-2"><span class="hll">    <span class="n">db</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>
</span></span><span id="__span-0-3"><span class="hll">    <span class="k">try</span><span class="p">:</span>
</span></span><span id="__span-0-4"><span class="hll">        <span class="k">yield</span> <span class="n">db</span>
</span></span><span id="__span-0-5">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-0-6">        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>The yielded value is what is injected into <em>path operations</em> and other dependencies:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python 3.8+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db</span><span class="p">():</span>
</span><span id="__span-1-2">    <span class="n">db</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>
</span><span id="__span-1-3">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-1-4"><span class="hll">        <span class="k">yield</span> <span class="n">db</span>
</span></span><span id="__span-1-5">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-1-6">        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>The code following the <code>yield</code> statement is executed after creating the response but before sending it:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python 3.8+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db</span><span class="p">():</span>
</span><span id="__span-2-2">    <span class="n">db</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>
</span><span id="__span-2-3">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-2-4">        <span class="k">yield</span> <span class="n">db</span>
</span><span id="__span-2-5"><span class="hll">    <span class="k">finally</span><span class="p">:</span>
</span></span><span id="__span-2-6"><span class="hll">        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span></code></pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <code>async</code> or regular functions.</p>
<p><strong>ReadyAPI</strong> will do the right thing with each, the same as with normal dependencies.</p>
</div>
<h2 id="a-dependency-with-yield-and-try">A dependency with <code>yield</code> and <code>try</code><a class="headerlink" href="#a-dependency-with-yield-and-try" title="Permanent link">&para;</a></h2>
<p>If you use a <code>try</code> block in a dependency with <code>yield</code>, you'll receive any exception that was thrown when using the dependency.</p>
<p>For example, if some code at some point in the middle, in another dependency or in a <em>path operation</em>, made a database transaction "rollback" or create any other error, you will receive the exception in your dependency.</p>
<p>So, you can look for that specific exception inside the dependency with <code>except SomeException</code>.</p>
<p>In the same way, you can use <code>finally</code> to make sure the exit steps are executed, no matter if there was an exception or not.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python 3.8+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db</span><span class="p">():</span>
</span><span id="__span-3-2">    <span class="n">db</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>
</span><span id="__span-3-3"><span class="hll">    <span class="k">try</span><span class="p">:</span>
</span></span><span id="__span-3-4">        <span class="k">yield</span> <span class="n">db</span>
</span><span id="__span-3-5"><span class="hll">    <span class="k">finally</span><span class="p">:</span>
</span></span><span id="__span-3-6">        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="sub-dependencies-with-yield">Sub-dependencies with <code>yield</code><a class="headerlink" href="#sub-dependencies-with-yield" title="Permanent link">&para;</a></h2>
<p>You can have sub-dependencies and "trees" of sub-dependencies of any size and shape, and any or all of them can use <code>yield</code>.</p>
<p><strong>ReadyAPI</strong> will make sure that the "exit code" in each dependency with <code>yield</code> is run in the correct order.</p>
<p>For example, <code>dependency_c</code> can have a dependency on <code>dependency_b</code>, and <code>dependency_b</code> on <code>dependency_a</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python 3.9+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-4-2">
</span><span id="__span-4-3"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-4-4">
</span><span id="__span-4-5">
</span><span id="__span-4-6"><span class="hll"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span></span><span id="__span-4-7">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-4-8">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-9">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-4-10">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-4-11">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-4-12">
</span><span id="__span-4-13">
</span><span id="__span-4-14"><span class="hll"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepA</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)]):</span>
</span></span><span id="__span-4-15">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-4-16">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-17">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-4-18">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-4-19">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span><span id="__span-4-20">
</span><span id="__span-4-21">
</span><span id="__span-4-22"><span class="hll"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepB</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)]):</span>
</span></span><span id="__span-4-23">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-4-24">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-25">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-4-26">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-4-27">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<details>
<summary>ü§ì Other versions and variants</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Python 3.8+</label><label for="__tabbed_6_2">Python 3.8+ - non-Annotated</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-5-2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-5-3">
</span><span id="__span-5-4">
</span><span id="__span-5-5"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span><span id="__span-5-6">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-5-7">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-5-8">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-5-9">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-5-10">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-5-11">
</span><span id="__span-5-12">
</span><span id="__span-5-13"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepA</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)]):</span>
</span><span id="__span-5-14">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-5-15">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-5-16">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-5-17">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-5-18">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span><span id="__span-5-19">
</span><span id="__span-5-20">
</span><span id="__span-5-21"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepB</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)]):</span>
</span><span id="__span-5-22">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-5-23">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-5-24">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-5-25">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-5-26">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Prefer to use the <code>Annotated</code> version if possible.</p>
</div>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-6-2">
</span><span id="__span-6-3">
</span><span id="__span-6-4"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span><span id="__span-6-5">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-6-6">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-7">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-6-8">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-6-9">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-6-10">
</span><span id="__span-6-11">
</span><span id="__span-6-12"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="o">=</span><span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)):</span>
</span><span id="__span-6-13">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-6-14">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-15">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-6-16">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-6-17">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span><span id="__span-6-18">
</span><span id="__span-6-19">
</span><span id="__span-6-20"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="o">=</span><span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)):</span>
</span><span id="__span-6-21">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-6-22">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-23">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-6-24">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-6-25">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>And all of them can use <code>yield</code>.</p>
<p>In this case <code>dependency_c</code>, to execute its exit code, needs the value from <code>dependency_b</code> (here named <code>dep_b</code>) to still be available.</p>
<p>And, in turn, <code>dependency_b</code> needs the value from <code>dependency_a</code> (here named <code>dep_a</code>) to be available for its exit code.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Python 3.9+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-7-2">
</span><span id="__span-7-3"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-7-4">
</span><span id="__span-7-5">
</span><span id="__span-7-6"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span><span id="__span-7-7">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-7-8">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-7-9">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-7-10">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-7-11">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-7-12">
</span><span id="__span-7-13">
</span><span id="__span-7-14"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepA</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)]):</span>
</span><span id="__span-7-15">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-7-16">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-7-17">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-7-18"><span class="hll">    <span class="k">finally</span><span class="p">:</span>
</span></span><span id="__span-7-19"><span class="hll">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span></span><span id="__span-7-20">
</span><span id="__span-7-21">
</span><span id="__span-7-22"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepB</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)]):</span>
</span><span id="__span-7-23">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-7-24">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-7-25">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-7-26"><span class="hll">    <span class="k">finally</span><span class="p">:</span>
</span></span><span id="__span-7-27"><span class="hll">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></span></code></pre></div>
</div>
</div>
</div>
<details>
<summary>ü§ì Other versions and variants</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Python 3.8+</label><label for="__tabbed_8_2">Python 3.8+ - non-Annotated</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-8-2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-8-3">
</span><span id="__span-8-4">
</span><span id="__span-8-5"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span><span id="__span-8-6">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-8-7">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-8">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-8-9">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-8-10">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-8-11">
</span><span id="__span-8-12">
</span><span id="__span-8-13"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepA</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)]):</span>
</span><span id="__span-8-14">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-8-15">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-16">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-8-17">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-8-18">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span><span id="__span-8-19">
</span><span id="__span-8-20">
</span><span id="__span-8-21"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">DepB</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)]):</span>
</span><span id="__span-8-22">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-8-23">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-24">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-8-25">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-8-26">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Prefer to use the <code>Annotated</code> version if possible.</p>
</div>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-9-2">
</span><span id="__span-9-3">
</span><span id="__span-9-4"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_a</span><span class="p">():</span>
</span><span id="__span-9-5">    <span class="n">dep_a</span> <span class="o">=</span> <span class="n">generate_dep_a</span><span class="p">()</span>
</span><span id="__span-9-6">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-9-7">        <span class="k">yield</span> <span class="n">dep_a</span>
</span><span id="__span-9-8">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-9-9">        <span class="n">dep_a</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-9-10">
</span><span id="__span-9-11">
</span><span id="__span-9-12"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_b</span><span class="p">(</span><span class="n">dep_a</span><span class="o">=</span><span class="n">Depends</span><span class="p">(</span><span class="n">dependency_a</span><span class="p">)):</span>
</span><span id="__span-9-13">    <span class="n">dep_b</span> <span class="o">=</span> <span class="n">generate_dep_b</span><span class="p">()</span>
</span><span id="__span-9-14">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-9-15">        <span class="k">yield</span> <span class="n">dep_b</span>
</span><span id="__span-9-16">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-9-17">        <span class="n">dep_b</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_a</span><span class="p">)</span>
</span><span id="__span-9-18">
</span><span id="__span-9-19">
</span><span id="__span-9-20"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dependency_c</span><span class="p">(</span><span class="n">dep_b</span><span class="o">=</span><span class="n">Depends</span><span class="p">(</span><span class="n">dependency_b</span><span class="p">)):</span>
</span><span id="__span-9-21">    <span class="n">dep_c</span> <span class="o">=</span> <span class="n">generate_dep_c</span><span class="p">()</span>
</span><span id="__span-9-22">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-9-23">        <span class="k">yield</span> <span class="n">dep_c</span>
</span><span id="__span-9-24">    <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-9-25">        <span class="n">dep_c</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">dep_b</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>The same way, you could have some dependencies with <code>yield</code> and some other dependencies with <code>return</code>, and have some of those depend on some of the others.</p>
<p>And you could have a single dependency that requires several other dependencies with <code>yield</code>, etc.</p>
<p>You can have any combinations of dependencies that you want.</p>
<p><strong>ReadyAPI</strong> will make sure everything is run in the correct order.</p>
<div class="admonition note">
<p class="admonition-title">Technical Details</p>
<p>This works thanks to Python's <a href="https://docs.python.org/3/library/contextlib.html" class="external-link" target="_blank">Context Managers</a>.</p>
<p><strong>ReadyAPI</strong> uses them internally to achieve this.</p>
</div>
<h2 id="dependencies-with-yield-and-httpexception">Dependencies with <code>yield</code> and <code>HTTPException</code><a class="headerlink" href="#dependencies-with-yield-and-httpexception" title="Permanent link">&para;</a></h2>
<p>You saw that you can use dependencies with <code>yield</code> and have <code>try</code> blocks that catch exceptions.</p>
<p>The same way, you could raise an <code>HTTPException</code> or similar in the exit code, after the <code>yield</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This is a somewhat advanced technique, and in most of the cases you won't really need it, as you can raise exceptions (including <code>HTTPException</code>) from inside of the rest of your application code, for example, in the <em>path operation function</em>.</p>
<p>But it's there for you if you need it. ü§ì</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Python 3.9+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-10-1"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-10-2">
</span><span id="__span-10-3"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-10-4">
</span><span id="__span-10-5"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-10-6">
</span><span id="__span-10-7">
</span><span id="__span-10-8"><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-10-9">    <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Freshly pickled plumbus&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Morty&quot;</span><span class="p">},</span>
</span><span id="__span-10-10">    <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Gun to create portals&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Rick&quot;</span><span class="p">},</span>
</span><span id="__span-10-11"><span class="p">}</span>
</span><span id="__span-10-12">
</span><span id="__span-10-13">
</span><span id="__span-10-14"><span class="k">class</span><span class="w"> </span><span class="nc">OwnerError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-10-15">    <span class="k">pass</span>
</span><span id="__span-10-16">
</span><span id="__span-10-17">
</span><span id="__span-10-18"><span class="hll"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span></span><span id="__span-10-19"><span class="hll">    <span class="k">try</span><span class="p">:</span>
</span></span><span id="__span-10-20"><span class="hll">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span></span><span id="__span-10-21"><span class="hll">    <span class="k">except</span> <span class="n">OwnerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span id="__span-10-22"><span class="hll">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Owner error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></span><span id="__span-10-23">
</span><span id="__span-10-24">
</span><span id="__span-10-25"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-26"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-10-27">    <span class="k">if</span> <span class="n">item_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-10-28">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found&quot;</span><span class="p">)</span>
</span><span id="__span-10-29">    <span class="n">item</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
</span><span id="__span-10-30">    <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">username</span><span class="p">:</span>
</span><span id="__span-10-31"><span class="hll">        <span class="k">raise</span> <span class="n">OwnerError</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</span></span><span id="__span-10-32">    <span class="k">return</span> <span class="n">item</span>
</span></code></pre></div>
</div>
</div>
</div>
<details>
<summary>ü§ì Other versions and variants</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Python 3.8+</label><label for="__tabbed_10_2">Python 3.8+ - non-Annotated</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-11-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-11-2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-11-3">
</span><span id="__span-11-4"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-11-5">
</span><span id="__span-11-6">
</span><span id="__span-11-7"><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-8">    <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Freshly pickled plumbus&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Morty&quot;</span><span class="p">},</span>
</span><span id="__span-11-9">    <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Gun to create portals&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Rick&quot;</span><span class="p">},</span>
</span><span id="__span-11-10"><span class="p">}</span>
</span><span id="__span-11-11">
</span><span id="__span-11-12">
</span><span id="__span-11-13"><span class="k">class</span><span class="w"> </span><span class="nc">OwnerError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-11-14">    <span class="k">pass</span>
</span><span id="__span-11-15">
</span><span id="__span-11-16">
</span><span id="__span-11-17"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-11-18">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-11-19">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-11-20">    <span class="k">except</span> <span class="n">OwnerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-11-21">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Owner error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-22">
</span><span id="__span-11-23">
</span><span id="__span-11-24"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-25"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-11-26">    <span class="k">if</span> <span class="n">item_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-11-27">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found&quot;</span><span class="p">)</span>
</span><span id="__span-11-28">    <span class="n">item</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
</span><span id="__span-11-29">    <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">username</span><span class="p">:</span>
</span><span id="__span-11-30">        <span class="k">raise</span> <span class="n">OwnerError</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</span><span id="__span-11-31">    <span class="k">return</span> <span class="n">item</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Prefer to use the <code>Annotated</code> version if possible.</p>
</div>
<div class="highlight"><pre><span></span><code><span id="__span-12-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-12-2">
</span><span id="__span-12-3"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-12-4">
</span><span id="__span-12-5">
</span><span id="__span-12-6"><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-12-7">    <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Freshly pickled plumbus&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Morty&quot;</span><span class="p">},</span>
</span><span id="__span-12-8">    <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Gun to create portals&quot;</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;Rick&quot;</span><span class="p">},</span>
</span><span id="__span-12-9"><span class="p">}</span>
</span><span id="__span-12-10">
</span><span id="__span-12-11">
</span><span id="__span-12-12"><span class="k">class</span><span class="w"> </span><span class="nc">OwnerError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-12-13">    <span class="k">pass</span>
</span><span id="__span-12-14">
</span><span id="__span-12-15">
</span><span id="__span-12-16"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-12-17">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-12-18">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-12-19">    <span class="k">except</span> <span class="n">OwnerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-12-20">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Owner error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-21">
</span><span id="__span-12-22">
</span><span id="__span-12-23"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-24"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)):</span>
</span><span id="__span-12-25">    <span class="k">if</span> <span class="n">item_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-12-26">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found&quot;</span><span class="p">)</span>
</span><span id="__span-12-27">    <span class="n">item</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
</span><span id="__span-12-28">    <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">username</span><span class="p">:</span>
</span><span id="__span-12-29">        <span class="k">raise</span> <span class="n">OwnerError</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</span><span id="__span-12-30">    <span class="k">return</span> <span class="n">item</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>An alternative you could use to catch exceptions (and possibly also raise another <code>HTTPException</code>) is to create a <a class="internal-link" href="../../handling-errors/#install-custom-exception-handlers" target="_blank">Custom Exception Handler</a>.</p>
<h2 id="dependencies-with-yield-and-except">Dependencies with <code>yield</code> and <code>except</code><a class="headerlink" href="#dependencies-with-yield-and-except" title="Permanent link">&para;</a></h2>
<p>If you catch an exception using <code>except</code> in a dependency with <code>yield</code> and you don't raise it again (or raise a new exception), ReadyAPI won't be able to notice there was an exception, the same way that would happen with regular Python:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Python 3.9+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-13-1"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-13-2">
</span><span id="__span-13-3"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-13-4">
</span><span id="__span-13-5"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-13-6">
</span><span id="__span-13-7">
</span><span id="__span-13-8"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-13-9">    <span class="k">pass</span>
</span><span id="__span-13-10">
</span><span id="__span-13-11">
</span><span id="__span-13-12"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-13-13">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-13-14">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-13-15"><span class="hll">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span></span><span id="__span-13-16"><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops, we didn&#39;t raise again, Britney üò±&quot;</span><span class="p">)</span>
</span></span><span id="__span-13-17">
</span><span id="__span-13-18">
</span><span id="__span-13-19"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-13-20"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-13-21">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-13-22">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-13-23">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-13-24">        <span class="p">)</span>
</span><span id="__span-13-25">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-13-26">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-13-27">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-13-28">        <span class="p">)</span>
</span><span id="__span-13-29">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
</div>
</div>
<details>
<summary>ü§ì Other versions and variants</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Python 3.8+</label><label for="__tabbed_12_2">Python 3.8+ - non-Annotated</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-14-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-14-2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-14-3">
</span><span id="__span-14-4"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-14-5">
</span><span id="__span-14-6">
</span><span id="__span-14-7"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-14-8">    <span class="k">pass</span>
</span><span id="__span-14-9">
</span><span id="__span-14-10">
</span><span id="__span-14-11"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-14-12">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-14-13">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-14-14">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span><span id="__span-14-15">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops, we didn&#39;t raise again, Britney üò±&quot;</span><span class="p">)</span>
</span><span id="__span-14-16">
</span><span id="__span-14-17">
</span><span id="__span-14-18"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-14-19"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-14-20">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-14-21">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-14-22">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-14-23">        <span class="p">)</span>
</span><span id="__span-14-24">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-14-25">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-14-26">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-14-27">        <span class="p">)</span>
</span><span id="__span-14-28">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Prefer to use the <code>Annotated</code> version if possible.</p>
</div>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-15-2">
</span><span id="__span-15-3"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-15-4">
</span><span id="__span-15-5">
</span><span id="__span-15-6"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-15-7">    <span class="k">pass</span>
</span><span id="__span-15-8">
</span><span id="__span-15-9">
</span><span id="__span-15-10"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-15-11">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-15-12">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-15-13">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span><span id="__span-15-14">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops, we didn&#39;t raise again, Britney üò±&quot;</span><span class="p">)</span>
</span><span id="__span-15-15">
</span><span id="__span-15-16">
</span><span id="__span-15-17"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-15-18"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)):</span>
</span><span id="__span-15-19">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-15-20">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-15-21">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-15-22">        <span class="p">)</span>
</span><span id="__span-15-23">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-15-24">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-15-25">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-15-26">        <span class="p">)</span>
</span><span id="__span-15-27">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>In this case, the client will see an <em>HTTP 500 Internal Server Error</em> response as it should, given that we are not raising an <code>HTTPException</code> or similar, but the server will <strong>not have any logs</strong> or any other indication of what was the error. üò±</p>
<h3 id="always-raise-in-dependencies-with-yield-and-except">Always <code>raise</code> in Dependencies with <code>yield</code> and <code>except</code><a class="headerlink" href="#always-raise-in-dependencies-with-yield-and-except" title="Permanent link">&para;</a></h3>
<p>If you catch an exception in a dependency with <code>yield</code>, unless you are raising another <code>HTTPException</code> or similar, you should re-raise the original exception.</p>
<p>You can re-raise the same exception using <code>raise</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Python 3.9+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-16-1"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-16-2">
</span><span id="__span-16-3"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-16-4">
</span><span id="__span-16-5"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-16-6">
</span><span id="__span-16-7">
</span><span id="__span-16-8"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-16-9">    <span class="k">pass</span>
</span><span id="__span-16-10">
</span><span id="__span-16-11">
</span><span id="__span-16-12"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-16-13">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-16-14">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-16-15">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span><span id="__span-16-16">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We don&#39;t swallow the internal error here, we raise again üòé&quot;</span><span class="p">)</span>
</span><span id="__span-16-17"><span class="hll">        <span class="k">raise</span>
</span></span><span id="__span-16-18">
</span><span id="__span-16-19">
</span><span id="__span-16-20"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-21"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-16-22">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-16-23">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-16-24">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-16-25">        <span class="p">)</span>
</span><span id="__span-16-26">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-16-27">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-16-28">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-16-29">        <span class="p">)</span>
</span><span id="__span-16-30">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
</div>
</div>
<details>
<summary>ü§ì Other versions and variants</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Python 3.8+</label><label for="__tabbed_14_2">Python 3.8+ - non-Annotated</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-17-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-17-2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span id="__span-17-3">
</span><span id="__span-17-4"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-17-5">
</span><span id="__span-17-6">
</span><span id="__span-17-7"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-17-8">    <span class="k">pass</span>
</span><span id="__span-17-9">
</span><span id="__span-17-10">
</span><span id="__span-17-11"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-17-12">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-13">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-17-14">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span><span id="__span-17-15">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We don&#39;t swallow the internal error here, we raise again üòé&quot;</span><span class="p">)</span>
</span><span id="__span-17-16">        <span class="k">raise</span>
</span><span id="__span-17-17">
</span><span id="__span-17-18">
</span><span id="__span-17-19"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-20"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)]):</span>
</span><span id="__span-17-21">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-17-22">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-17-23">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-17-24">        <span class="p">)</span>
</span><span id="__span-17-25">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-17-26">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-17-27">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-17-28">        <span class="p">)</span>
</span><span id="__span-17-29">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Prefer to use the <code>Annotated</code> version if possible.</p>
</div>
<div class="highlight"><pre><span></span><code><span id="__span-18-1"><span class="kn">from</span><span class="w"> </span><span class="nn">readyapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">ReadyAPI</span>
</span><span id="__span-18-2">
</span><span id="__span-18-3"><span class="n">app</span> <span class="o">=</span> <span class="n">ReadyAPI</span><span class="p">()</span>
</span><span id="__span-18-4">
</span><span id="__span-18-5">
</span><span id="__span-18-6"><span class="k">class</span><span class="w"> </span><span class="nc">InternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="__span-18-7">    <span class="k">pass</span>
</span><span id="__span-18-8">
</span><span id="__span-18-9">
</span><span id="__span-18-10"><span class="k">def</span><span class="w"> </span><span class="nf">get_username</span><span class="p">():</span>
</span><span id="__span-18-11">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-18-12">        <span class="k">yield</span> <span class="s2">&quot;Rick&quot;</span>
</span><span id="__span-18-13">    <span class="k">except</span> <span class="n">InternalError</span><span class="p">:</span>
</span><span id="__span-18-14">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We don&#39;t swallow the internal error here, we raise again üòé&quot;</span><span class="p">)</span>
</span><span id="__span-18-15">        <span class="k">raise</span>
</span><span id="__span-18-16">
</span><span id="__span-18-17">
</span><span id="__span-18-18"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-18-19"><span class="k">def</span><span class="w"> </span><span class="nf">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_username</span><span class="p">)):</span>
</span><span id="__span-18-20">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s2">&quot;portal-gun&quot;</span><span class="p">:</span>
</span><span id="__span-18-21">        <span class="k">raise</span> <span class="n">InternalError</span><span class="p">(</span>
</span><span id="__span-18-22">            <span class="sa">f</span><span class="s2">&quot;The portal gun is too dangerous to be owned by </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-18-23">        <span class="p">)</span>
</span><span id="__span-18-24">    <span class="k">if</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="s2">&quot;plumbus&quot;</span><span class="p">:</span>
</span><span id="__span-18-25">        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-18-26">            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Item not found, there&#39;s only a plumbus here&quot;</span>
</span><span id="__span-18-27">        <span class="p">)</span>
</span><span id="__span-18-28">    <span class="k">return</span> <span class="n">item_id</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>Now the client will get the same <em>HTTP 500 Internal Server Error</em> response, but the server will have our custom <code>InternalError</code> in the logs. üòé</p>
<h2 id="execution-of-dependencies-with-yield">Execution of dependencies with <code>yield</code><a class="headerlink" href="#execution-of-dependencies-with-yield" title="Permanent link">&para;</a></h2>
<p>The sequence of execution is more or less like this diagram. Time flows from top to bottom. And each column is one of the parts interacting or executing code.</p>
<pre class="mermaid"><code>sequenceDiagram

participant client as Client
participant handler as Exception handler
participant dep as Dep with yield
participant operation as Path Operation
participant tasks as Background tasks

    Note over client,operation: Can raise exceptions, including HTTPException
    client -&gt;&gt; dep: Start request
    Note over dep: Run code up to yield
    opt raise Exception
        dep --&gt;&gt; handler: Raise Exception
        handler --&gt;&gt; client: HTTP error response
    end
    dep -&gt;&gt; operation: Run dependency, e.g. DB session
    opt raise
        operation --&gt;&gt; dep: Raise Exception (e.g. HTTPException)
        opt handle
            dep --&gt;&gt; dep: Can catch exception, raise a new HTTPException, raise other exception
        end
        handler --&gt;&gt; client: HTTP error response
    end

    operation -&gt;&gt; client: Return response to client
    Note over client,operation: Response is already sent, can't change it anymore
    opt Tasks
        operation --&gt;&gt; tasks: Send background tasks
    end
    opt Raise other exception
        tasks --&gt;&gt; tasks: Handle exceptions in the background task code
    end</code></pre>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Only <strong>one response</strong> will be sent to the client. It might be one of the error responses or it will be the response from the <em>path operation</em>.</p>
<p>After one of those responses is sent, no other response can be sent.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This diagram shows <code>HTTPException</code>, but you could also raise any other exception that you catch in a dependency with <code>yield</code> or with a <a class="internal-link" href="../../handling-errors/#install-custom-exception-handlers" target="_blank">Custom Exception Handler</a>.</p>
<p>If you raise any exception, it will be passed to the dependencies with yield, including <code>HTTPException</code>. In most cases you will want to re-raise that same exception or a new one from the dependency with <code>yield</code> to make sure it's properly handled.</p>
</div>
<h2 id="dependencies-with-yield-httpexception-except-and-background-tasks">Dependencies with <code>yield</code>, <code>HTTPException</code>, <code>except</code> and Background Tasks<a class="headerlink" href="#dependencies-with-yield-httpexception-except-and-background-tasks" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You most probably don't need these technical details, you can skip this section and continue below.</p>
<p>These details are useful mainly if you were using a version of ReadyAPI prior to 0.106.0 and used resources from dependencies with <code>yield</code> in background tasks.</p>
</div>
<h3 id="dependencies-with-yield-and-except-technical-details">Dependencies with <code>yield</code> and <code>except</code>, Technical Details<a class="headerlink" href="#dependencies-with-yield-and-except-technical-details" title="Permanent link">&para;</a></h3>
<p>Before ReadyAPI 0.110.0, if you used a dependency with <code>yield</code>, and then you captured an exception with <code>except</code> in that dependency, and you didn't raise the exception again, the exception would be automatically raised/forwarded to any exception handlers or the internal server error handler.</p>
<p>This was changed in version 0.110.0 to fix unhandled memory consumption from forwarded exceptions without a handler (internal server errors), and to make it consistent with the behavior of regular Python code.</p>
<h3 id="background-tasks-and-dependencies-with-yield-technical-details">Background Tasks and Dependencies with <code>yield</code>, Technical Details<a class="headerlink" href="#background-tasks-and-dependencies-with-yield-technical-details" title="Permanent link">&para;</a></h3>
<p>Before ReadyAPI 0.106.0, raising exceptions after <code>yield</code> was not possible, the exit code in dependencies with <code>yield</code> was executed <em>after</em> the response was sent, so <a class="internal-link" href="../../handling-errors/#install-custom-exception-handlers" target="_blank">Exception Handlers</a> would have already run.</p>
<p>This was designed this way mainly to allow using the same objects "yielded" by dependencies inside of background tasks, because the exit code would be executed after the background tasks were finished.</p>
<p>Nevertheless, as this would mean waiting for the response to travel through the network while unnecessarily holding a resource in a dependency with yield (for example a database connection), this was changed in ReadyAPI 0.106.0.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Additionally, a background task is normally an independent set of logic that should be handled separately, with its own resources (e.g. its own database connection).</p>
<p>So, this way you will probably have cleaner code.</p>
</div>
<p>If you used to rely on this behavior, now you should create the resources for background tasks inside the background task itself, and use internally only data that doesn't depend on the resources of dependencies with <code>yield</code>.</p>
<p>For example, instead of using the same database session, you would create a new database session inside of the background task, and you would obtain the objects from the database using this new session. And then instead of passing the object from the database as a parameter to the background task function, you would pass the ID of that object and then obtain the object again inside the background task function.</p>
<h2 id="context-managers">Context Managers<a class="headerlink" href="#context-managers" title="Permanent link">&para;</a></h2>
<h3 id="what-are-context-managers">What are "Context Managers"<a class="headerlink" href="#what-are-context-managers" title="Permanent link">&para;</a></h3>
<p>"Context Managers" are any of those Python objects that you can use in a <code>with</code> statement.</p>
<p>For example, <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files" class="external-link" target="_blank">you can use <code>with</code> to read a file</a>:</p>
<div class="highlight"><pre><span></span><code><span id="__span-19-1"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./somefile.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-19-2">    <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="__span-19-3">    <span class="nb">print</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span></code></pre></div>
<p>Underneath, the <code>open("./somefile.txt")</code> creates an object that is called a "Context Manager".</p>
<p>When the <code>with</code> block finishes, it makes sure to close the file, even if there were exceptions.</p>
<p>When you create a dependency with <code>yield</code>, <strong>ReadyAPI</strong> will internally create a context manager for it, and combine it with some other related tools.</p>
<h3 id="using-context-managers-in-dependencies-with-yield">Using context managers in dependencies with <code>yield</code><a class="headerlink" href="#using-context-managers-in-dependencies-with-yield" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is, more or less, an "advanced" idea.</p>
<p>If you are just starting with <strong>ReadyAPI</strong> you might want to skip it for now.</p>
</div>
<p>In Python, you can create Context Managers by <a href="https://docs.python.org/3/reference/datamodel.html#context-managers" class="external-link" target="_blank">creating a class with two methods: <code>__enter__()</code> and <code>__exit__()</code></a>.</p>
<p>You can also use them inside of <strong>ReadyAPI</strong> dependencies with <code>yield</code> by using
<code>with</code> or <code>async with</code> statements inside of the dependency function:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Python 3.8+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span id="__span-20-1"><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">MySuperContextManager</span><span class="p">:</span>
</span></span><span id="__span-20-2"><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span id="__span-20-3"><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">DBSession</span><span class="p">()</span>
</span></span><span id="__span-20-4"><span class="hll">
</span></span><span id="__span-20-5"><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span id="__span-20-6"><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span>
</span></span><span id="__span-20-7"><span class="hll">
</span></span><span id="__span-20-8"><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
</span></span><span id="__span-20-9"><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span id="__span-20-10">
</span><span id="__span-20-11">
</span><span id="__span-20-12"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db</span><span class="p">():</span>
</span><span id="__span-20-13"><span class="hll">    <span class="k">with</span> <span class="n">MySuperContextManager</span><span class="p">()</span> <span class="k">as</span> <span class="n">db</span><span class="p">:</span>
</span></span><span id="__span-20-14">        <span class="k">yield</span> <span class="n">db</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Another way to create a context manager is with:</p>
<ul>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager" class="external-link" target="_blank"><code>@contextlib.contextmanager</code></a> or</li>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.asynccontextmanager" class="external-link" target="_blank"><code>@contextlib.asynccontextmanager</code></a></li>
</ul>
<p>using them to decorate a function with a single <code>yield</code>.</p>
<p>That's what <strong>ReadyAPI</strong> uses internally for dependencies with <code>yield</code>.</p>
<p>But you don't have to use the decorators for ReadyAPI dependencies (and you shouldn't).</p>
<p>ReadyAPI will do it for you internally.</p>
</div>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –Ω–∞–≥–æ—Ä—É
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="–§—É—Ç–µ—Ä" >
        
          
          <a href="../global-dependencies/" class="md-footer__link md-footer__link--prev" aria-label="–ù–∞–∑–∞–¥: Global Dependencies">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                –ù–∞–∑–∞–¥
              </span>
              <div class="md-ellipsis">
                Global Dependencies
              </div>
            </div>
          </a>
        
        
          
          <a href="../../security/" class="md-footer__link md-footer__link--next" aria-label="–í–ø–µ—Ä–µ–¥: Security">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                –í–ø–µ—Ä–µ–¥
              </span>
              <div class="md-ellipsis">
                Security
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    <div class="md-copyright__highlight">
        The ReadyAPI trademark is owned by <a href="https://khulnasoft.com" target="_blank">@khulnasoft</a> and is registered in the US and across other regions
    </div>
    
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
        Material for MkDocs
    </a>
    
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/readyapi/readyapi" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/VQjSZaeJmf" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/readyapi" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/readyapi" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://khulnasoft.com" target="_blank" rel="noopener" title="khulnasoft.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u0421\u043a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0429\u0435 1 \u0437\u0431\u0456\u0433 \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456", "search.result.more.other": "\u0429\u0435 # \u0437\u0431\u0456\u0433\u0456\u0432 \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456", "search.result.none": "\u0417\u0431\u0456\u0433\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0437\u0431\u0456\u0433", "search.result.other": "\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e # \u0437\u0431\u0456\u0433\u0456\u0432", "search.result.placeholder": "\u0420\u043e\u0437\u043f\u043e\u0447\u043d\u0456\u0442\u044c \u043f\u0438\u0441\u0430\u0442\u0438 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443", "search.result.term.missing": "\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430\u043f\u0438\u0442\u0443", "select.version": "\u041e\u0431\u0440\u0430\u0442\u0438 \u0432\u0435\u0440\u0441\u0456\u044e"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5090c770.min.js"></script>
      
        <script src="../../../js/termynal.js"></script>
      
        <script src="../../../js/custom.js"></script>
      
    
  </body>
</html>